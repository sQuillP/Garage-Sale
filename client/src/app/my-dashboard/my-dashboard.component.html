<div class="main">

    <div class="dashboard-header flex center-y sp-around">
        <div class="img-wrapper">
            <img src="https://www.business2community.com/wp-content/uploads/2017/08/blank-profile-picture-973460_640.png" 
            alt="Profile image" 
            class="img">
        </div>
        <p class="text thin">Will's Dashboard</p>
        <div 
        (click)="onNavigate(['new-sale'])"
        class="create-sale-container">
            <p class="text intro thin">New sale</p>
            <mat-icon class="add-circle">add_circle</mat-icon>
        </div>
    </div>
    <!-- Divide into three sections -->
    <div class="dashboard-layout">

        <div [formGroup]="userInfo" class="info-section">
            <div class="info-descriptor">
                <p class="text intro">My Information</p>
                <hr class="underline">
            </div>
            <div class="info-layout flex center-xy">
                <div class="info-left">
                    <div class="info-item">
                        <div class="info-header flex center-y">
                            <i class="header-icon fa-solid fa-id-card"></i>
                            <p class="text">Full Name</p>
                        </div>
                        <div class="info-content">
                            <input 
                            #fullName
                            formControlName="fullName"
                            *ngIf="true"
                            type="text" 
                            class="info-input"
                            >
                        </div>
                        <i
                        (click)="onEdit($event,'fullName')"
                        matTooltip="Edit" 
                        [matTooltipShowDelay]="500"
                        [matTooltipPosition]="'right'"
                        class="edit-icon fa-solid fa-pen"></i>
                    </div>
                    <div class="info-item">
                        <div class="info-header flex center-y">
                            <i class="info-icon fa-solid fa-at"></i>                    
                            <p class="text">Email Address</p>
                        </div>
                        <div class="info-content">
                            <input 
                            #email
                            formControlName="email"
                            type="email" 
                            class="info-input"
                            >
                        </div>
                        <i
                        [matTooltipShowDelay]="500"
                        [matTooltipPosition]="'right'"
                        matTooltip="Edit" 
                        (click)="onEdit($event,'email')"
                        class="edit-icon fa-solid fa-pen"></i>
                    </div>
                </div>
               <div class="info-right">
                <div class="info-item">
                    <div class="info-header flex center-y">
                        <i class="header-icon fa-solid fa-phone"></i>
                        <p class="text">Phone</p>
                    </div>
                    <div class="info-content">
                        <input 
                        #phone
                        formControlName="phone"
                        type="text" 
                        class="info-input"
                        maxlength="14"
                        >
                    </div>
                    <i
                    [matTooltipShowDelay]="500"
                    [matTooltipPosition]="'right'"
                    matTooltip="Edit" 
                    (click)="onEdit($event,'phone')"
                    class="edit-icon fa-solid fa-pen"></i>
                </div>
                <div class="info-item">
                    <div class="info-header flex center-y">
                        <i class="header-icon fa-solid fa-lock"></i>                        
                        <p class="text">Password</p>
                    </div>
                    <div class="info-content">
                        <input
                            formControlName="password"
                            type="password" 
                            class="info-input"
                            #password
                        >
                    </div>
                    <i 
                    [matTooltipShowDelay]="500"
                    [matTooltipPosition]="'right'"
                    matTooltip="Edit"
                    (click)="onEdit($event,'password')"
                    class="edit-icon fa-solid fa-pen"></i>
                </div>
               </div>
            </div>
            <div class="info-bottom flex center-xy">
                <div class="info-item">
                    <div class="info-header flex center-y">
                        <i class="header-icon fa-solid fa-user"></i>
                        <p class="text">Profile Image</p>
                    </div>
                    <div class="info-content">
                        <input 
                        #profileImage
                        formControlName="profileImg"
                        mat-ripple
                        matRippleColor="rgba(78, 124, 56,0.4)"
                        type="text" 
                        class="info-input"
                        >         
                    </div>
                    <i
                    [matTooltipShowDelay]="500"
                    [matTooltipPosition]="'right'"
                    matTooltip="Edit"
                    (click)="onEdit($event,'profileImg')"
                    class="edit-icon fa-solid fa-pen"></i>
                </div>
            </div>
        </div>
        <div class="sale-col">
            <div class="sale-descriptor"> 
                <p class="text header">My Sales</p>
            </div>

            <div class="my-sale-section">
                <div *ngIf="mySales$ |async;" class="my-sale-wrapper">
                    <app-sale-listing
                    *ngFor="let sale of mySales$|async"
                    [sale]="sale"
                    ></app-sale-listing>
                </div>
                <div *ngIf="displayNoSales" class="no-sale-wrapper">
                    <div class="no-sale-content">
                        <p class="text intro">
                            You Currently Have no Sales
                        </p>
                        <p class="text small">Get to selling your stuff today</p>
                        <i 
                        style="color: gray;"
                        class="no-sale-icon fa-sharp fa-solid fa-triangle-exclamation"></i>
                    </div>
                </div>
                <div *ngIf="displayFetchSalesError" class="no-sale-wrapper">
                    <div class="no-sale-content">
                        <p class="text intro">
                            Unable to Fetch Sales
                        </p>
                        <p class="text small">Check your internet connection and refresh the page</p>
                        <i 
                        style="color: red;"
                        class="no-sale-icon fa-sharp fa-solid fa-triangle-exclamation"></i>
                    </div>
                </div>
                <div *ngIf="loadingSales" class="no-sale-wrapper flex center-xy col">
                    <app-loading></app-loading>
                    <p class="small">loading...</p>
                </div>
            </div>
        </div>
    </div>
</div>
